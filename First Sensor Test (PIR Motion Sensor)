# PIR Motion Sensor â†’ Vespera Light Control (MQTT)

> **Arduino MKR WiFi 1010 + PIR Motion Sensor Prototype**  
> UCL CASA0014 â€“ *Prototyping the Internet of Things (Connected Environments)*  

![Arduino Badge](https://img.shields.io/badge/Arduino-MKR1010-blue)
![WiFi Badge](https://img.shields.io/badge/WiFiNINA-Library-orange)
![MQTT Badge](https://img.shields.io/badge/MQTT-PubSubClient-green)
![IoT Badge](https://img.shields.io/badge/IoT-Connected%20Environments-lightgrey)

---

## Overview

This prototype used a **PIR (Passive Infrared) sensor** to detect human presence in the lab and **trigger a Vespera light** via **MQTT**.  
The aim was to demonstrate how motion detection can be used to interact with IoT-connected lighting systems.  

During testing, several challenges emerged around **sensor responsiveness**, **calibration delays**, and **real-time reactivity**, which influenced my design decisions and led to a pivot in my approach.

---

## Hardware Setup

### Components
| Component | Description |
|------------|-------------|
| **Arduino MKR WiFi 1010** | Microcontroller with built-in Wi-Fi |
| **PIR Motion Sensor** | Detects infrared radiation (body heat) movement |
| **Vespera Light** | MQTT-based connected light system |
| **Jumper Wires & Breadboard** | For temporary connections |

### ðŸ”Œ Wiring Diagram

    +---------------------------+
    |  Arduino MKR WiFi 1010    |
    |---------------------------|
    |  5V  ---->  VCC (PIR)     |
    |  GND ---->  GND (PIR)     |
    |  D2  ---->  OUT (PIR)     |
    |---------------------------|
    |  LED_BUILTIN = Status LED |
    +---------------------------+


*The PIR sensor requires around **30â€“60 seconds** to calibrate after powering on.*

---

## Testing Observations

- The **PIR sensor** successfully triggered the Vespera light through **MQTT messages** when motion was detected.  
- However, I noticed that:
  - The PIR sensor took a **long time to calibrate** after powering on.  
  - Even after calibration, **motion detection felt delayed**, and it didnâ€™t react immediately when I moved or waved my hands.  
  - I tried adjusting **code timing variables** to increase responsiveness but still encountered lag.  
  - Re-uploading and re-testing multiple times showed **inconsistent response speed**.  
  - I realised that the PIR sensor detects **infrared changes (body heat)** rather than **instant gestures**, which naturally introduces a short delay.

---

## Reflection

Because I only had **two minutes** to present my project on *Show and Tell Day*, relying on a slower, unpredictable sensor risked making my demo **unreliable**.  
I wanted to create a **visible, immediate link** between my input (sensor trigger) and **Vesperaâ€™s light output**.

Revisiting the assessment guide reminded me that my goal was to **demonstrate understanding**, not complexity.  
At this stage, **reliability and clarity** were more valuable than ambition.

This reflection led me to **pivot** from motion-based detection to **sound-based input** â€” a decision driven by both technical performance and presentation constraints.

---

## Lessons Learned

| Lesson | Insight |
|---------|----------|
| **1. Sensor performance varies.** | PIR sensors are slower because they detect **heat-based motion**, not instantaneous movement. |
| **2. Calibration is critical.** | PIR sensors need time to adjust to ambient temperature before they can detect reliably. |
| **3. Environment matters.** | Warm rooms or distant movement can cause delayed or missed triggers. |
| **4. Test early and often.** | Early trials reveal performance limits long before presentation day. |
| **5. Simplification improves clarity.** | A simpler system can better communicate understanding than an unreliable complex one. |

---

## Next Steps â€“ Transition to MAX4466 Microphone Sensor

After evaluating the PIRâ€™s limitations, I decided to switch to a **MAX4466 analog microphone sensor** that could detect **knock sounds** and send signals **instantly**.

| Change and Benefit |

| From PIR â†’ MAX4466 i had a Faster and more reliable response |
| From Infrared â†’ Audio it Detected instant knocks instead of slow heat movement |
| From motion â†’ sound gesture it Provided clear, time-limited input for a short presentation |

This transition allowed me to **demonstrate immediate interaction** between a simple physical action (a knock) and the **Vespera lightâ€™s response**, creating a stronger, more engaging IoT prototype.

---

## Key Takeaways
- PIR sensors are **excellent for room presence detection**, but **not ideal for quick, timed reactions**.  
- **Environmental temperature** and **sensor warm-up time** affect performance.  
- **Choosing the right sensor** for the right context is as important as the code itself.  
- **Iterative prototyping** testing, observing, adaptingâ€”is key to successful IoT design.  
- Simplicity and reliability often communicate ideas **better than technical complexity**.

---




